(this.webpackJsonpmeetneeds=this.webpackJsonpmeetneeds||[]).push([[0],{170:function(e,n,t){e.exports=t(344)},175:function(e,n,t){},344:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(4),l=t.n(o);t(175),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(168),i=t(26),u=t(59),m=t.n(u),s=t(82),d=t(346),p=t(351),h=t(352),f=function(e){var n=e.form;return r.a.createElement(d.a,{name:"Submit New Need",form:n},r.a.createElement(d.a.Item,{name:"name",label:"Name",rules:[{required:!0}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"phone",label:"Phone",rules:[{required:!1}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"need",label:"Need",rules:[{required:!0}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"anonymous",valuePropName:"checked"},r.a.createElement(h.a,null,"I wish to remain anonymous when my need is displayed publicly")))},E={UPDATE_URL:"https://meetneeds.herokuapp.com/update",CREATE_URL:"https://meetneeds.herokuapp.com/create",GET_URL:"https://meetneeds.herokuapp.com/getall"},b=t(347),g=t(43),w=t(350),y=t(345),O=function(e,n){switch(n.type){case"open":return{newNeedOpen:!0};case"close":return{newNeedOpen:!1};default:return e.newNeedOpen}},v=function(e){var n=Object(a.useReducer)(O,{newNeedOpen:!1}),t=Object(i.a)(n,2),o=t[0],l=t[1],c=d.a.useForm(),u=Object(i.a)(c,1)[0],p=E.CREATE_URL,h=function(){l({newNeedOpen:!1})},v=function(e){console.log(e),h()};return r.a.createElement(b.a,{title:"Meet Needs",subTitle:"Connecting Your Community",extra:r.a.createElement(g.a,{type:"primary",onClick:function(){return l({type:"open"})}}," New need ")},r.a.createElement(w.a,{visible:o.newNeedOpen,onCancel:h,onOk:function(){u.validateFields().then((function(n){u.resetFields(),function(n){function t(){return(t=Object(s.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({needingUser:{name:n.name,email:n.email,phone:n.phone,anon:n.anonymous},need:n.need})},fetch(p,t).then((function(e){return e})).then((function(e){return v(e)})).catch((function(e){return alert("Something went wrong: ".concat(e))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("Received this form data: "),console.log(n),n.name&&n.need&&(n.phone||n.email)?(!function(){t.apply(this,arguments)}(),e.onNewNeed()):alert("Please enter your name, your need, and at least one way we can contact you.")}(n)}))}},r.a.createElement("p",null,"Plase use this form to submit a new need."),r.a.createElement(f,{form:u,closeNeed:h}),r.a.createElement("p",null,"Refer to our Privacy Policy for privacy details.")),r.a.createElement(y.a,null))},N=t(349),j=function(e){var n=e.form;return r.a.createElement(d.a,{name:"Meet A Need",form:n},r.a.createElement("p",null,"Thank you for volunteering to meet this need! "),r.a.createElement("p",null,"Please complete this form and we will be in touch soon."),r.a.createElement(d.a.Item,{name:"name",label:"Name",rules:[{required:!0}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"phone",label:"Phone",rules:[{required:!1}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"}]},r.a.createElement(p.a,null)),r.a.createElement(d.a.Item,{name:"rationale",label:"Please let us know how you'll meet this need",rules:[{required:!0}]},r.a.createElement(p.a,null)))},k=function(e){var n=Object(a.useState)(e),t=Object(i.a)(n,2),o=t[0],l=t[1],c=Object(a.useState)({meetOpen:!1}),u=Object(i.a)(c,2),p=u[0],h=u[1],f=d.a.useForm(),b=Object(i.a)(f,1)[0],y="".concat(E.UPDATE_URL,"?id=").concat(o._id),O=function(e){console.log(e),h({meetOpen:!1})};return Object(a.useEffect)((function(){l(e)}),[e]),r.a.createElement("div",null,r.a.createElement(N.a,{title:"".concat(o.needingUser.name," needs")},r.a.createElement("p",null,o.need),r.a.createElement(g.a,{size:"small",onClick:function(){return h({meetOpen:!0})}},"I can meet this need"),r.a.createElement(w.a,{visible:p.meetOpen,onCancel:function(){return h({meetOpen:!1})},onOk:function(){b.validateFields().then((function(n){b.resetFields(),function(n,t){function a(){return(a=Object(s.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({meetingUser:{name:n.name,email:n.email,phone:n.phone,rationale:n.rationale}})},fetch(y,t).then((function(e){return e})).then((function(e){return O(e)})).catch((function(e){return alert("Something went wrong: ".concat(e))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(n),n.name&&n.rationale&&(n.phone||n.email)?(!function(){a.apply(this,arguments)}(),e.onMetNeed()):alert("Please enter your name, how you plan to provide for this need, and at least one way we can contact you.")}(n)}))},okText:"Submit"},r.a.createElement(j,{form:b}))))},T=t(348),S=function(){var e=Object(a.useState)(1),n=Object(i.a)(e,2),t=n[0],o=n[1],l=function(e){var n=Object(a.useState)({data:{},loading:!0,pageNumber:1}),t=Object(i.a)(n,2),r=t[0],o=r.data,l=r.loading,c=r.pageNumber,u=t[1];return Object(a.useEffect)((function(){fetch(e).then((function(e){return e.json()})).then((function(e){return u({data:e,loading:!1,pageNumber:1})}))}),[e,c]),{data:o,loading:l,pageNumber:c}}("".concat(E.GET_URL,"?pagenumber=").concat(t)),u=l.data,m=l.loading,s=l.itemTotal;return r.a.createElement("div",null,r.a.createElement(v,{onNewNeed:function(){return o(0)}}),m?r.a.createElement(N.a,{loading:m}):null===u?r.a.createElement(N.a,null,"Woah! There are no unmet needs to load. Check back later to meet a need, or click the New Need button to create a new one."):r.a.createElement(T.a,{pagination:{onChange:function(e){o(e)},pageSize:10},grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:Object(c.a)(u),total:s,renderItem:function(e){return r.a.createElement(T.a.Item,null,r.a.createElement(k,Object.assign({onMetNeed:function(){return o(t+1)}},e)))}}))};t(343);var I=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[170,1,2]]]);
//# sourceMappingURL=main.ccf0a29c.chunk.js.map